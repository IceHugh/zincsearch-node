import{Pool as t}from"undici";class e{options;client;headers;constructor(e){this.options=e;const{url:i,user:s,password:r,connections:n=10}=this.options,h="Basic "+Buffer.from(s+":"+r).toString("base64");this.headers={"Content-type":"application/json",Authorization:h},this.client=new t(i,{connections:n})}async request(t){const{headers:e}=this,{headers:i={},Method:s}=t,r=Object.assign(e,i);t.headers=r;const{body:n,statusCode:h}=await this.client.request(t);if("HEAD"==s||"GET"===s)return 200===h;{const t=await n.json();if(200!==h)throw new Error(t?.error.toString());return t}}}class i{client;constructor(t){this.client=t}analyze(t){return this.client.request({path:"/api/_analyze",method:"POST",body:JSON.stringify(t)})}analyzeIndex(t,e){return this.client.request({path:`/api/${t}/_analyze`,method:"POST",body:JSON.stringify(e)})}list(t){return this.client.request({path:"/api/index",method:"GET",query:t})}create(t){return this.client.request({path:"/api/index",method:"POST",body:JSON.stringify(t)})}exists(t){return this.client.request({path:`/api/index/${t}`,method:"HEAD"})}get(t){return this.client.request({path:`/api/index/${t}`,method:"GET"})}delete(t){return this.client.request({path:`/api/index/${t}`,method:"DELETE"})}refresh(t){return this.client.request({path:`/api/index/${t}/refresh`,method:"POST"})}listName(t){return this.client.request({path:"/api/index_name",method:"GET",query:t})}getMapping(t){return this.client.request({path:`/api/${t}/_mapping`,method:"GET"})}setMapping({index:t,mapping:e}){return this.client.request({path:`/api/${t}/_mapping`,method:"PUT",body:JSON.stringify(e)})}getSetting(t){return this.client.request({path:`/api/${t}/_setting`,method:"GET"})}setSetting({index:t,settings:e}){return this.client.request({path:`/api/${t}/_setting`,method:"PUT",body:JSON.stringify(e)})}}class s{client;constructor(t){this.client=t}bulk(t){return this.client.request({path:"/api/_bulk",method:"POST",body:t})}bulkv2(t){return this.client.request({path:"/api/_bulkv2",method:"POST",body:JSON.stringify(t)})}multi(t){const{index:e,query:i}=t;return this.client.request({path:`/api/${e}/_multi`,method:"POST",body:JSON.stringify(i)})}create(t){const{index:e,document:i}=t;return this.client.request({path:`/api/${e}/_doc`,method:"POST",body:JSON.stringify(i)})}update(t){const{index:e,document:i,id:s}=t;return this.client.request({path:`/api/${e}/_update/${s}`,method:"POST",body:JSON.stringify(i)})}createOrUpdate(t){const{index:e,document:i,id:s}=t;return this.client.request({path:`/api/${e}/_doc/${s}`,method:"PUT",body:JSON.stringify(i)})}delete(t){const{index:e,id:i}=t;return this.client.request({path:`/api/${e}/_doc/${i}`,method:"DELETE"})}}class r{client;constructor(t){this.client=t}analyze(t){return this.client.request({path:"/es/_analyze",method:"POST",body:JSON.stringify(t)})}bulk(t){return this.client.request({path:"/es/_bulk",method:"POST",body:t})}addOrRemoveEsAlias(){return this.client.request({path:"/es/_aliase",method:"POST"})}listTemplates(){return this.client.request({path:"/es/_index_template",method:"GET"})}createTemplate(t){return this.client.request({path:"/es/_index_template",method:"POST",body:JSON.stringify(t)})}getTemplate(t){return this.client.request({path:`/es/_index_template/${t}`,method:"GET"})}updateTemplate(t,e){return this.client.request({path:`/es/_index_template/${t}`,method:"PUT",body:JSON.stringify(e)})}deleteTemplate(t){return this.client.request({path:`/es/_index_template/${t}`,method:"DELETE"})}mSearch(t){return this.client.request({path:"/es/_msearch",method:"PUT",body:t})}create(t){const{index:e,...i}=t;return this.client.request({path:`/es/${e}`,method:"PUT",body:JSON.stringify(i)})}exists(t){return this.client.request({path:`/es/${t}`,method:"HEAD"})}getMapping(t){return this.client.request({path:`/es/${t}/_mapping`,method:"GET"})}search(t){const{index:e,...i}=t;return this.client.request({path:`/es/${e}/_search`,method:"POST",body:JSON.stringify(i)})}getAliases(t,e){return this.client.request({path:`/es/${t}/_alias/${e}`,method:"GET"})}}class n{client;constructor(t){this.client=t}login(t){return this.client.request({path:"/api/login",method:"POST",body:JSON.stringify(t)})}list(){return this.client.request({path:"/api/user",method:"GET"})}create(t){return this.client.request({path:"/api/user",method:"POST",body:JSON.stringify(t)})}update(t){return this.client.request({path:"/api/user",method:"PUT",body:JSON.stringify(t)})}delete(t){return this.client.request({path:`/api/user/${t}`,method:"DELETE"})}}class h{indices;document;client;user;es;constructor(t){const{url:h,user:a,password:o}=t,u=new e({url:h,user:a,password:o});this.indices=new i(u),this.document=new s(u),this.user=new n(u),this.es=new r(u),this.client=u}healthz(){return this.client.request({path:"/healthz",method:"GET"})}version(){return this.client.request({path:"/version",method:"GET"})}search(t){const{index:e,...i}=t;return this.client.request({path:`/api/${e}/_search`,method:"POST",body:JSON.stringify(i)})}}export{h as default};
