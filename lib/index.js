import{Pool as t}from"undici";function e(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i}function i(t,e,i,r){return new(i||(i=Promise))((function(n,s){function h(t){try{o(r.next(t))}catch(t){s(t)}}function a(t){try{o(r.throw(t))}catch(t){s(t)}}function o(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(h,a)}o((r=r.apply(t,e||[])).next())}))}class r{constructor(e){this.options=e;const{url:i,user:r,password:n,connections:s=10}=this.options,h="Basic "+Buffer.from(r+":"+n).toString("base64");this.headers={"Content-type":"application/json",Authorization:h},this.client=new t(i,{connections:s})}request(t){return i(this,void 0,void 0,(function*(){const{headers:e}=this,{headers:i={},Method:r}=t,n=Object.assign(e,i);t.headers=n;const{body:s,statusCode:h}=yield this.client.request(t);if("HEAD"==r||"GET"===r)return 200===h;{const t=yield s.json();if(200!==h)throw new Error(null==t?void 0:t.error.toString());return t}}))}}class n{constructor(t){this.client=t}analyze(t){return this.client.request({path:"/api/_analyze",method:"POST",body:JSON.stringify(t)})}analyzeIndex(t,e){return this.client.request({path:`/api/${t}/_analyze`,method:"POST",body:JSON.stringify(e)})}list(t){return this.client.request({path:"/api/index",method:"GET",query:t})}create(t){return this.client.request({path:"/api/index",method:"POST",body:JSON.stringify(t)})}exists(t){return this.client.request({path:`/api/index/${t}`,method:"HEAD"})}get(t){return this.client.request({path:`/api/index/${t}`,method:"GET"})}delete(t){return this.client.request({path:`/api/index/${t}`,method:"DELETE"})}refresh(t){return this.client.request({path:`/api/index/${t}/refresh`,method:"POST"})}nameList(t){return this.client.request({path:"/api/index_name",method:"GET",query:t})}getMapping(t){return this.client.request({path:`/api/${t}/_mapping`,method:"GET"})}setMapping(t,e){return this.client.request({path:`/api/${t}/_mapping`,method:"PUT",body:JSON.stringify(e)})}getSetting(t){return this.client.request({path:`/api/${t}/_setting`,method:"GET"})}setSetting(t,e){return this.client.request({path:`/api/${t}/_setting`,method:"PUT",body:JSON.stringify(e)})}}class s{constructor(t){this.client=t}bulk(t){return this.client.request({path:"/api/_bulk",method:"POST",body:t})}bulkv2(t){return this.client.request({path:"/api/_bulkv2",method:"POST",body:JSON.stringify(t)})}multi(t){const{index:e,query:i}=t;return this.client.request({path:`/api/${e}/_multi`,method:"POST",body:JSON.stringify(i)})}create(t){const{index:e,document:i}=t;return this.client.request({path:`/api/${e}/_doc/`,method:"POST",body:JSON.stringify(i)})}update(t){const{index:e,document:i,id:r}=t;return this.client.request({path:`/api/${e}/_update/${r}`,method:"POST",body:JSON.stringify(i)})}createOrUpdate(t){const{index:e,document:i,id:r}=t;return this.client.request({path:`/api/${e}/_doc/${r}`,method:"PUT",body:JSON.stringify(i)})}delete(t){const{index:e,id:i}=t;return this.client.request({path:`/api/${e}/_update/${i}`,method:"DELETE"})}}class h{constructor(t){this.client=t}search(t){const{index:i}=t,r=e(t,["index"]);return this.client.request({path:`/api/${i}/_search`,method:"POST",body:JSON.stringify(r)})}}class a{constructor(t){this.client=t}bulk(t){return this.client.request({path:"/es/_bulk",method:"POST",body:t})}addOrRemoveEsAlias(){return this.client.request({path:"/es/_aliase",method:"POST"})}listTemplates(){return this.client.request({path:"/es/_index_template",method:"GET"})}createTemplate(t){return this.client.request({path:"/es/_index_template",method:"POST",body:JSON.stringify(t)})}getTemplate(t){return this.client.request({path:`/es/_index_template/${t}`,method:"GET"})}updateTemplate(t,e){return this.client.request({path:`/es/_index_template/${t}`,method:"PUT",body:JSON.stringify(e)})}deleteTemplate(t){return this.client.request({path:`/es/_index_template/${t}`,method:"DELETE"})}mSearch(t){return this.client.request({path:"/es/_msearch",method:"PUT",body:t})}create(t,e){return this.client.request({path:`/es/${t}`,method:"PUT",body:JSON.stringify(e)})}exists(t){return this.client.request({path:`/es/${t}`,method:"HEAD"})}getMapping(t){return this.client.request({path:`/es/${t}/_mapping`,method:"GET"})}search(t){const{index:i}=t,r=e(t,["index"]);return this.client.request({path:`/es/${i}/_search`,method:"POST",body:JSON.stringify(r)})}getAliases(t,e){return this.client.request({path:`/es/${t}/_alias/${e}`,method:"GET"})}}class o{constructor(t){this.client=t}login(t){return this.client.request({path:"/api/login",method:"POST",body:JSON.stringify(t)})}list(){return this.client.request({path:"/api/user",method:"GET"})}create(t){return this.client.request({path:"/api/user",method:"POST",body:JSON.stringify(t)})}update(t){return this.client.request({path:"/api/user",method:"PUT",body:JSON.stringify(t)})}delete(t){return this.client.request({path:`/api/user/${t}`,method:"DELETE"})}}class u{constructor(t){const{url:e,user:i,password:u}=t,c=new r({url:e,user:i,password:u});this.indices=new n(c),this.document=new s(c),this.search=new h(c),this.user=new o(c),this.es=new a(c),this.client=c}healthz(){return this.client.request({path:"/healthz",method:"GET"})}version(){return this.client.request({path:"/version",method:"GET"})}}export{u as default};
